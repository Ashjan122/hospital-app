# ุฅุนุฏุงุฏ Firebase Cloud Messaging (FCM)

## โ ูุง ุชู ุฅูุฌุงุฒู:

### 1. ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู:
- โ ุฅุถุงูุฉ ููุชุจุฉ `firebase_messaging` ูู `pubspec.yaml`
- โ ุฅุถุงูุฉ ููุชุจุฉ `http` ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
- โ ุฅุนุฏุงุฏ `main.dart` ูุทูุจ ุงูุฅุฐู ููุฅุดุนุงุฑุงุช
- โ ุญูุธ FCM token ูู SharedPreferences
- โ ุญูุธ FCM token ูููุฑูุถ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุฃุฐููุงุช Android:
- โ `POST_NOTIFICATIONS` - ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
- โ `INTERNET` - ููุงุชุตุงู ุจุงูุฅูุชุฑูุช
- โ `WAKE_LOCK` - ูุฅููุงุธ ุงูุฌูุงุฒ
- โ `VIBRATE` - ููุงูุชุฒุงุฒ
- โ `RECEIVE` - ูุงุณุชูุจุงู ุงูุฅุดุนุงุฑุงุช

### 3. ุฅุนุฏุงุฏุงุช iOS:
- โ `UIBackgroundModes` - ููุฅุดุนุงุฑุงุช ูู ุงูุฎูููุฉ
- โ `NSAppTransportSecurity` - ููุงุชุตุงูุงุช ุงูุขููุฉ

## ๐ง ูุง ูุญุชุงุฌ ุฅููุงูู:

### 1. ููุชุงุญ ุงูุฎุงุฏู (Server Key):
```dart
// ูู ููู admin_bookings_screen.dartุ ุงุณุชุจุฏู:
'Authorization': 'key=YOUR_SERVER_KEY'

// ุจู ููุชุงุญ ุงูุฎุงุฏู ุงูุญูููู ูู Firebase Console
```

### 2. ุงูุญุตูู ุนูู ููุชุงุญ ุงูุฎุงุฏู:
1. ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com/)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู Project Settings
4. ูู ุชุจููุจ Cloud Messaging
5. ุงูุณุฎ Server Key

### 3. ุฅุนุฏุงุฏ Firebase Cloud Functions (ุงุฎุชูุงุฑู):
```javascript
// functions/index.js
const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

exports.sendNotification = functions.https.onCall(async (data, context) => {
  const { token, title, body } = data;
  
  const message = {
    notification: {
      title: title,
      body: body,
    },
    token: token,
  };
  
  try {
    const response = await admin.messaging().send(message);
    return { success: true, messageId: response };
  } catch (error) {
    throw new functions.https.HttpsError('internal', error.message);
  }
});
```

## ๐ฑ ููููุฉ ุงูุงุณุชุฎุฏุงู:

### 1. ุทูุจ ุงูุฅุฐู:
- ุนูุฏ ูุชุญ ุงูุชุทุจูู ูุฃูู ูุฑุฉุ ุณูุทูุจ ุงูุฅุฐู ููุฅุดุนุงุฑุงุช
- ุงููุณุชุฎุฏู ููููู ุงูุณูุงุญ ุฃู ุฑูุถ

### 2. ุญูุธ Token:
- ูุชู ุญูุธ FCM token ุชููุงุฆูุงู ุนูุฏ ุชุณุฌูู ุฏุฎูู ุงููุฑูุถ
- ูุชู ุชุญุฏูุซ Token ุนูุฏ ุชุบููุฑู

### 3. ุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช:
```dart
// ูู ุดุงุดุฉ ุงูุญุฌูุฒุงุช
await sendNotificationToPatient(
  patientId,
  'ุชุฐููุฑ ุจููุนุฏ',
  'ููุนุฏู ุบุฏุงู ุงูุณุงุนุฉ 10:00 ุตุจุงุญุงู'
);
```

## ๐ ุงูููุฒุงุช ุงููุชุงุญุฉ:

- โ ุทูุจ ุงูุฅุฐู ููุฅุดุนุงุฑุงุช ุชููุงุฆูุงู
- โ ุญูุธ FCM token ูููุฑุถู
- โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ูุฎุตุตุฉ
- โ ุฏุนู ุงูุฅุดุนุงุฑุงุช ูู ุงูุฎูููุฉ
- โ ุฏุนู ุงูุฅุดุนุงุฑุงุช ุนูุฏ ูุชุญ ุงูุชุทุจูู

## ๐ ููุงุญุธุงุช ูููุฉ:

1. **ููุชุงุญ ุงูุฎุงุฏู**: ูุฌุจ ุงุณุชุจุฏุงูู ุจููุชุงุญ ุญูููู ูู Firebase Console
2. **Firebase Cloud Functions**: ููุถู ุงุณุชุฎุฏุงููุง ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช ุจุฏูุงู ูู HTTP ูุจุงุดุฑุฉ
3. **ุงูุงุฎุชุจุงุฑ**: ุชุฃูุฏ ูู ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช ุนูู ุฃุฌูุฒุฉ ุญููููุฉ
4. **ุงูุฃูุงู**: ูุง ุชุดุงุฑู ููุชุงุญ ุงูุฎุงุฏู ูู ุงูููุฏ ุงูุนุงู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

### ุฅุฐุง ูู ุชุธูุฑ ุงูุฅุดุนุงุฑุงุช:
1. ุชุฃูุฏ ูู ููุญ ุงูุฅุฐู ููุฅุดุนุงุฑุงุช
2. ุชุญูู ูู FCM token ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุฃูุฏ ูู ุตุญุฉ ููุชุงุญ ุงูุฎุงุฏู
4. ุชุญูู ูู ุณุฌูุงุช Firebase Console

### ุฅุฐุง ูู ูุชู ุญูุธ Token:
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุชุฃูุฏ ูู ุชุณุฌูู ุฏุฎูู ุงููุฑูุถ
3. ุชุญูู ูู ุณุฌูุงุช ุงูุชุทุจูู
