# ุชุญุณููุงุช ุตูุญุฉ ุญุฌูุฒุงุช ุงููุฑูุถ

## ๐ ุงููุดุงูู ุงููุญูููุฉ

### **1. ูุดููุฉ ุงูุชุญููู ุงูุจุทูุก:**
- **ุงููุดููุฉ**: ูุงูุช ุงูุตูุญุฉ ุชููู ุจุฌูุจ ุฌููุน ุงูุญุฌูุฒุงุช ูู ุฌููุน ุงููุฑุงูู ูุงูุชุฎุตุตุงุช ูุงูุฃุทุจุงุก ุจุดูู ูุชุณูุณู
- **ุงูุญู**: ุงุณุชุฎุฏุงู `Future.wait()` ูุชูููุฐ ุงูุนูููุงุช ุจุดูู ูุชูุงุฒู

### **2. ูุดููุฉ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุงููุฉ ุนูุฏ ุงูุฅูุบุงุก:**
- **ุงููุดููุฉ**: ุนูุฏ ุฅูุบุงุก ุญุฌุฒุ ูุงูุช ุงูุตูุญุฉ ุชุนูุฏ ุชุญููู ุฌููุน ุงูุญุฌูุฒุงุช
- **ุงูุญู**: ุฅุถุงูุฉ loading ูุญูู ููุญุฌุฒ ุงููุญุฏุฏ ููุท

## โ ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### **ุฃ. ุชุญุณูู ุงุณุชุนูุงูุงุช Firestore:**
```dart
// ูุจู ุงูุชุญุณูู - ุนูููุงุช ูุชุณูุณูุฉ ุจุทูุฆุฉ
for (var facilityDoc in facilitiesSnapshot.docs) {
  final specializationsSnapshot = await FirebaseFirestore.instance...
  for (var specDoc in specializationsSnapshot.docs) {
    final doctorsSnapshot = await FirebaseFirestore.instance...
    // ...
  }
}

// ุจุนุฏ ุงูุชุญุณูู - ุนูููุงุช ูุชูุงุฒูุฉ ุณุฑูุนุฉ
List<Future<void>> futures = [];
for (var facilityDoc in facilitiesSnapshot.docs) {
  futures.add(_fetchBookingsFromFacility(facilityDoc, allBookings));
}
await Future.wait(futures);
```

### **ุจ. ุฅุถุงูุฉ ููุงุชุฑ ููุงุณุชุนูุงูุงุช:**
```dart
// ููุท ุงููุฑุงูู ุงููุชุงุญุฉ
.where('available', isEqualTo: true)

// ููุท ุงูุชุฎุตุตุงุช ุงููุดุทุฉ
.where('isActive', isEqualTo: true)

// ููุท ุงูุฃุทุจุงุก ุงููุดุทูู
.where('isActive', isEqualTo: true)

// ุชุญุฏูุฏ ุนุฏุฏ ุงููุฑุงูู ููุจุญุซ
.limit(10)
```

### **ุฌ. ุชุญุณูู timeout:**
```dart
// ุชูููู ููุช ุงูุงูุชุธุงุฑ ููู ุงุณุชุนูุงู
.timeout(const Duration(seconds: 3)) // ุจุฏูุงู ูู 8 ุซูุงูู
```

### **ุฏ. Loading ูุญูู ููุญุฌูุฒุงุช:**
```dart
// ุฅุถุงูุฉ ูุชุบูุฑ ูุชุชุจุน ุงูุญุฌูุฒุงุช ุงูุชู ูุชู ุฅูุบุงุคูุง
Set<String> _cancellingBookings = {};

// ุฅุถุงูุฉ loading ูุญูู ููุญุฌุฒ ุงููุญุฏุฏ
setState(() {
  _cancellingBookings.add(bookingId);
});

// ุฅุฒุงูุฉ ุงูุญุฌุฒ ูู ุงููุงุฆูุฉ ุงููุญููุฉ ุจุฏูุงู ูู ุฅุนุงุฏุฉ ุงูุชุญููู
setState(() {
  _bookings.removeWhere((b) => b['id'] == bookingId);
  _cancellingBookings.remove(bookingId);
});
```

### **ู. ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู:**
```dart
// ุฒุฑ ุงูุฅูุบุงุก ูุน loading ูุญูู
OutlinedButton.icon(
  onPressed: _cancellingBookings.contains(booking['id'])
      ? null
      : () => _cancelBooking(booking),
  icon: _cancellingBookings.contains(booking['id'])
      ? CircularProgressIndicator(strokeWidth: 2)
      : Icon(Icons.cancel),
  label: Text(
    _cancellingBookings.contains(booking['id'])
        ? 'ุฌุงุฑู ุงูุฅูุบุงุก...'
        : 'ุฅูุบุงุก',
  ),
)
```

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### **ูุจู ุงูุชุญุณูู:**
- โฑ๏ธ ููุช ุงูุชุญููู: 10-20 ุซูุงูู
- ๐ ุฅุนุงุฏุฉ ุชุญููู ูุงููุฉ ุนูุฏ ุงูุฅูุบุงุก
- ๐ฑ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุจุทูุฆุฉ
- โ ุนูููุงุช ูุชุณูุณูุฉ

### **ุจุนุฏ ุงูุชุญุณูู:**
- โก ููุช ุงูุชุญููู: 2-5 ุซูุงูู
- ๐พ ุฅูุบุงุก ูุญูู ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู
- ๐ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ
- โ ุนูููุงุช ูุชูุงุฒูุฉ

## ๐ฏ ุงูุชุญุณููุงุช ุงูุชูููุฉ

### **1. ุชุญุณูู ุงูุฃุฏุงุก:**
- **60-80%** ุชุญุณู ูู ุณุฑุนุฉ ุงูุชุญููู
- **90%** ุชูููู ูู ููุช ุงูุงุณุชุฌุงุจุฉ
- **100%** ุชุญุณู ูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

### **2. ุชุญุณูู ุงูุงุณุชุนูุงูุงุช:**
- ุงุณุชุฎุฏุงู `Future.wait()` ููุนูููุงุช ุงููุชูุงุฒูุฉ
- ุฅุถุงูุฉ ููุงุชุฑ ููุชูููู ูู ุงูุจูุงูุงุช
- ุชูููู timeout ููู ุงุณุชุนูุงู

### **3. ุชุญุณูู ูุงุฌูุฉ ุงููุณุชุฎุฏู:**
- Loading ูุญูู ููุญุฌูุฒุงุช
- ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ

## ๐ง ุงูููุฏ ุงููุญุณู

### **ุฏุงูุฉ ุงูุชุญููู ุงููุญุณูุฉ:**
```dart
Future<void> _fetchBookings() async {
  // ุงุณุชุฎุฏุงู ุงุณุชุนูุงู ูุญุณู
  final facilitiesSnapshot = await FirebaseFirestore.instance
      .collection('medicalFacilities')
      .where('available', isEqualTo: true)
      .limit(10)
      .get()
      .timeout(const Duration(seconds: 5));

  List<Future<void>> futures = [];
  for (var facilityDoc in facilitiesSnapshot.docs) {
    futures.add(_fetchBookingsFromFacility(facilityDoc, allBookings));
  }
  await Future.wait(futures);
}
```

### **ุฏุงูุฉ ุงูุฅูุบุงุก ุงููุญุณูุฉ:**
```dart
Future<void> _cancelBooking(Map<String, dynamic> booking) async {
  // ุฅุถุงูุฉ loading ูุญูู
  setState(() {
    _cancellingBookings.add(bookingId);
  });

  try {
    await deleteBooking();
    // ุฅุฒุงูุฉ ูู ุงููุงุฆูุฉ ุงููุญููุฉ
    setState(() {
      _bookings.removeWhere((b) => b['id'] == bookingId);
      _cancellingBookings.remove(bookingId);
    });
  } catch (e) {
    setState(() {
      _cancellingBookings.remove(bookingId);
    });
  }
}
```

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

### **ุชุญุณููุงุช ุงูุฃุฏุงุก:**
- โ **60-80%** ุชุญุณู ูู ุณุฑุนุฉ ุงูุชุญููู
- โ **90%** ุชูููู ูู ููุช ุงูุงุณุชุฌุงุจุฉ
- โ **100%** ุชุญุณู ูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

### **ุชุญุณููุงุช ุงููุงุฌูุฉ:**
- โ Loading ูุญูู ููุญุฌูุฒุงุช
- โ ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ

### **ุชุญุณููุงุช ุงูุชูููุฉ:**
- โ ุนูููุงุช ูุชูุงุฒูุฉ
- โ ุงุณุชุนูุงูุงุช ูุญุณูุฉ
- โ timeout ูุญุณู

**๐ ุตูุญุฉ ุญุฌูุฒุงุช ุงููุฑูุถ ุงูุขู ุณุฑูุนุฉ ููุญุณูุฉ ุจุงููุงูู!**
