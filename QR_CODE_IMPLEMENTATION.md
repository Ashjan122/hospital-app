# تنفيذ QR Code في PDF الحجز

## الميزات المضافة

تم إضافة QR Code إلى PDF الحجز الطبي مع المعلومات التالية:

### البيانات المضمنة في QR Code:
- **ID الحجز**: معرف فريد للحجز
- **اسم المريض**: اسم المريض المسجل

### موقع QR Code في PDF:
- **الموقع**: فوق الفاصل الأسود في الجانب الأيسر من الصفحة
- **الحجم**: 80×80 بكسل
- **النص التوضيحي**: "QR Code للحجز" تحت الصورة

## التحديثات المطلوبة

### 1. إضافة مكتبة QR Flutter
تم إضافة المكتبة التالية إلى `pubspec.yaml`:
```yaml
qr_flutter: ^4.1.0
```

### 2. تحديث خدمة PDF
تم تحديث `lib/services/syncfusion_pdf_service.dart`:
- إضافة دالة `_generateQrCodeImage()` لإنشاء QR code كصورة
- تحديث دالة `generateBookingPdf()` لتقبل `bookingId`
- إضافة QR code إلى PDF في الموقع المحدد

### 3. تحديث شاشات الحجز
تم تحديث الملفات التالية:
- `lib/screnns/patient_bookings_screen.dart`: إضافة `bookingId` عند استدعاء خدمة PDF
- `lib/screnns/patient_info_screen.dart`: الحصول على `bookingId` بعد إنشاء الحجز وتمريره لخدمة PDF

## كيفية الاستخدام

### عند إنشاء حجز جديد:
1. يتم إنشاء الحجز في Firestore
2. الحصول على ID الحجز المُنشأ
3. تمرير ID الحجز مع باقي البيانات لخدمة PDF
4. إنشاء QR code يحتوي على جميع بيانات الحجز
5. إضافة QR code إلى PDF في الموقع المحدد

### عند عرض حجز موجود:
1. استخدام ID الحجز الموجود في البيانات
2. تمرير ID الحجز مع باقي البيانات لخدمة PDF
3. إنشاء QR code وعرضه في PDF

## اختبار QR Code

تم إنشاء شاشة اختبار في `lib/examples/qr_test.dart` لاختبار QR code:
- عرض QR code مع بيانات تجريبية
- إمكانية مسح QR code للتأكد من صحة البيانات

## ملاحظات تقنية

- QR code يحتوي على بيانات JSON مشفرة
- يمكن مسح QR code باستخدام أي تطبيق QR scanner
- البيانات المشفرة تحتوي على ID الحجز واسم المريض فقط
- في حالة فشل إنشاء QR code، سيتم تجاهل الخطأ ومتابعة إنشاء PDF بدون QR code

## الأمان

- QR code يحتوي على معلومات الحجز الأساسية فقط
- لا يحتوي على معلومات حساسة مثل كلمات المرور أو البيانات المالية
- يمكن استخدام QR code للتحقق من صحة الحجز وعرض تفاصيله
