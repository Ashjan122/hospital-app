# إعداد قاعدة البيانات المركزية

## نظرة عامة

تم تعديل النظام ليستخدم قاعدة بيانات مركزية تحتوي على المجموعات التالية:

1. **`medicalSpecialties`** - التخصصات الطبية
2. **`allDoctors`** - جميع الأطباء
3. **`insuranceCompanies`** - شركات التأمين

## هيكل قاعدة البيانات

### 1. مجموعة التخصصات الطبية (`medicalSpecialties`)

```javascript
{
  "id": "cardiology", // معرف فريد (يتم إنشاؤه تلقائياً من الاسم)
  "name": "أمراض القلب", // اسم التخصص
  "description": "", // وصف التخصص (محجوب من الواجهة)
}
```

### 2. مجموعة الأطباء (`allDoctors`)

```javascript
{
  "id": "dr_ahmed_ali", // معرف فريد (يتم إنشاؤه تلقائياً من الاسم)
  "name": "د. أحمد علي", // اسم الطبيب
  "specialization": "cardiology", // معرف التخصص
  "phoneNumber": "+249123456789", // رقم الهاتف
  "photoUrl": "https://example.com/photo.jpg", // رابط الصورة
}
```

### 3. مجموعة شركات التأمين (`insuranceCompanies`)

```javascript
{
  "id": "blue_cross", // معرف فريد (يتم إنشاؤه تلقائياً من الاسم)
  "name": "بلو كروس", // اسم الشركة
  "description": "شركة تأمين صحي رائدة", // وصف الشركة
  "phone": "+249123456789", // رقم الهاتف
}
```

## كيفية الإضافة للمراكز الطبية

### إضافة تخصص لمركز طبي

عند إضافة تخصص لمركز طبي، يتم حفظ البيانات التالية:

```javascript
// في medicalFacilities/{centerId}/specializations/{specialtyId}
{
  "centralSpecialtyId": "cardiology", // معرف التخصص من المجموعة المركزية
  "specName": "أمراض القلب", // اسم التخصص (نسخة)
  "description": "تخصص في تشخيص وعلاج أمراض القلب والأوعية الدموية", // وصف التخصص
  "isActive": true, // حالة التخصص في هذا المركز
  "createdAt": timestamp // تاريخ الإضافة
}
```

### إضافة طبيب لمركز طبي

عند إضافة طبيب لمركز طبي، يتم حفظ البيانات التالية:

```javascript
// في medicalFacilities/{centerId}/specializations/{specialtyId}/doctors/{doctorId}
{
  "centralDoctorId": "dr_ahmed_ali", // معرف الطبيب من المجموعة المركزية
  "docName": "د. أحمد علي", // اسم الطبيب (نسخة)
  "phoneNumber": "+249123456789", // رقم الهاتف
  "photoUrl": "https://example.com/photo.jpg", // رابط الصورة
  "specialization": "cardiology", // معرف التخصص
  "morningPatientLimit": 20, // الحد الأقصى للمرضى في الفترة الصباحية
  "eveningPatientLimit": 15, // الحد الأقصى للمرضى في الفترة المسائية
  "isActive": true, // حالة الطبيب في هذا المركز
  "createdAt": timestamp // تاريخ الإضافة
}
```

### إضافة شركة تأمين لمركز طبي

عند إضافة شركة تأمين لمركز طبي، يتم حفظ البيانات التالية:

```javascript
// في medicalFacilities/{centerId}/insuranceCompanies/{insuranceId}
{
  "centralInsuranceId": "blue_cross", // معرف شركة التأمين من المجموعة المركزية
  "name": "بلو كروس", // اسم الشركة (نسخة)
  "description": "شركة تأمين صحي رائدة", // وصف الشركة
  "phone": "+249123456789", // رقم الهاتف
  "isActive": true, // حالة الشركة في هذا المركز
  "createdAt": timestamp // تاريخ الإضافة
}
```

## المميزات

1. **مركزية البيانات**: جميع التخصصات والأطباء وشركات التأمين محفوظة في مكان واحد
2. **سهولة الإدارة**: يمكن إضافة نفس الطبيب أو التخصص لعدة مراكز بسهولة
3. **تحديث تلقائي**: عند تحديث البيانات في المجموعة المركزية، يمكن تحديثها في جميع المراكز
4. **مرونة**: كل مركز يمكنه تفعيل/تعطيل أو حذف أي عنصر حسب احتياجاته
5. **إدارة مباشرة**: يمكن إضافة التخصصات والأطباء وشركات التأمين من شاشات مخصصة
6. **عرض وتعديل**: يمكن عرض جميع البيانات المركزية وتعديلها من شاشات مخصصة

## كيفية الاستخدام

### إدارة البيانات المركزية من صفحة الكنترول

1. **ادخل لصفحة الكنترول** (باسم المستخدم: كنترول، كلمة المرور: 11223344)
2. **ستجد قسم "إدارة البيانات المركزية"** مع ثلاثة أزرار:

#### أزرار الإدارة الكاملة:
- **إدارة التخصصات**: عرض جميع التخصصات مع إمكانية التعديل
- **إدارة الأطباء**: عرض جميع الأطباء مع إمكانية التعديل
- **إدارة التأمين**: عرض جميع شركات التأمين مع إمكانية التعديل

### شاشات الإدارة الكاملة

#### شاشة إدارة التخصصات
- **عرض**: قائمة بجميع التخصصات
- **بحث**: إمكانية البحث في التخصصات
- **إضافة**: زر إضافة جديد في أسفل الشاشة
- **تعديل**: قائمة منسدلة لكل تخصص تحتوي على "تعديل" فقط

#### شاشة إدارة الأطباء
- **عرض**: قائمة بجميع الأطباء مع التخصصات وأرقام الهواتف
- **بحث**: إمكانية البحث في الأسماء والتخصصات وأرقام الهواتف
- **إضافة**: زر إضافة جديد في أسفل الشاشة
- **تعديل**: قائمة منسدلة لكل طبيب تحتوي على "تعديل" فقط

#### شاشة إدارة شركات التأمين
- **عرض**: قائمة بجميع شركات التأمين مع الأوصاف وأرقام الهواتف
- **بحث**: إمكانية البحث في الأسماء والأوصاف وأرقام الهواتف
- **إضافة**: زر إضافة جديد في أسفل الشاشة
- **تعديل**: قائمة منسدلة لكل شركة تحتوي على "تعديل" فقط

### إضافة بيانات مركزية جديدة

#### إضافة تخصص جديد
1. اضغط على زر "إدارة التخصصات" ثم زر الإضافة
2. أدخل اسم التخصص (مثال: "أمراض القلب")
3. اضغط "إضافة"

#### إضافة طبيب جديد
1. اضغط على زر "إدارة الأطباء" ثم زر الإضافة
2. أدخل اسم الطبيب (مثال: "د. أحمد علي")
3. أدخل رقم الهاتف
4. أدخل معرف التخصص (مثال: "cardiology")
5. اضغط "إضافة"

#### إضافة شركة تأمين جديدة
1. اضغط على زر "إدارة التأمين" ثم زر الإضافة
2. أدخل اسم الشركة (مثال: "بلو كروس")
3. أدخل وصف الشركة (اختياري)
4. أدخل رقم الهاتف (اختياري)
5. اضغط "إضافة"

### إضافة البيانات للمراكز

بعد إضافة البيانات المركزية، يمكن للمراكز إضافتها:

1. **إضافة تخصص لمركز**: اذهب لإدارة التخصصات في أي مركز وستجد التخصصات الجديدة في القائمة المنسدلة
2. **إضافة طبيب لمركز**: اذهب لإضافة طبيب في أي مركز وستجد الأطباء الجدد في القائمة المنسدلة
3. **إضافة شركة تأمين لمركز**: اذهب لإدارة شركات التأمين في أي مركز وستجد الشركات الجديدة في القائمة المنسدلة

## ملاحظات مهمة

- **المعرفات**: يتم إنشاء المعرفات تلقائياً من الأسماء العربية مع تحويلها للإنجليزية
- **التكرار**: يمكن إضافة نفس الطبيب أو التخصص لعدة مراكز
- **الحذف**: تم إزالة إمكانية الحذف من المجموعة المركزية لحماية البيانات
- **التحديث**: يمكن تحديث البيانات في المجموعة المركزية من صفحة الكنترول
- **الأمان**: فقط المستخدم "كنترول" يمكنه إدارة البيانات المركزية
- **البحث**: جميع شاشات الإدارة تحتوي على خاصية البحث للعثور على البيانات بسرعة
- **وصف التخصص**: تم إخفاء حقل وصف التخصص من الواجهة لتبسيط الإدخال
